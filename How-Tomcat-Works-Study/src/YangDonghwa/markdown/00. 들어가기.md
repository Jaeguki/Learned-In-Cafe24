# 들어가기
### 작성일
2019.05.07.


## 서블릿 컨테이너의 작동 원리
- 요청 객체(request object) 생성 후, 호출된 서블릿이 사용할 파라미터, 헤더, 쿠기, 질의문, URI와 같은 정보를 요청 객체에 채운다.
- 서블릿이 웹 클라이언트에 응답을 보낼 때 사용할 응답 객체(response object)를 생성한다.
- 서블릿의 service 메소드에 요청 객체와 응답 객체를 전달해 호출한다. 여기서 서블릿은 요청 객체로부터 값을 읽어들이고 응답 객체에 값을 쓴다.


## 카탈리나의 구성도
카탈리나는 크게 커넥터와 컨테이너라는 2개의 주요 모듈로 구성되어 있다.

\- | 커넥터(Connector) | 컨테이너(Container)
--- | --- | ---
설명 | 요청을 컨테이너에 연결해 주는 모듈 | 웹 서버의 내부에서 서블릿을 실행하기 위한 실행 환경을 제공하는 것. 대표적으로 Tomcat, 웹로직, Resin 등이 있다.
역할 | 전달 받은 각 HTTP 요청에 대해 요청 객체와 응답 객체를 구성한 후, 컨테이너에 전달 | 커넥터로부터 요청 및 응답 객체를 전달받고, 서블릿의 service 메소드를 호출할 책임을 진다.


## 톰캣 버전 비교
책에서 다루는 4, 5버전과 차이가 크다고 알려진 7버전, 많이 사용되는 8버전에 대해 각각 비교해보았다.

버전 | 4 | 5 | 7 | 8
--- | --- | --- | --- | ---
서블릿 사양 | 2.4 | 2.5 | 3.0 | 3.1
JSP 사양 | 1.2 | 2.0 | 2.2 | 2.3
EL 사양 | N/A | N/A | 2.1 | 3.0
WebSocket 사양 | N/A | N/A | 1.0 | 1.0
최소 Java 버전 | 1.3 | 1.4 | 1.6 (WebSocket 1.0 1.7 필요) | 1.7

- EL: Java Bean의 property와 묵시적 객체에 대한 데이터 접근을 간단하게 하기 위해 만들어진 표현언어(Expression Language)
   - ${expression}


## 각 장의 소개
1. 간단한 HTTP 서버
2. 간단한 서블릿 컨테이너
3. 간단한 커넥터
4. 톰캣 4의 기본 커넥터
5. 컨테이너 모듈(engine, host, context, wrapper)
6. LifeCycle 인터페이스 (카탈리나 컴포넌트의 생명 주기)
7. 로거(logger) - 에러 등 메시지 기록하는 컴포넌트
8. 로더(loader) - 웹 애플리케이션이 사용하는 서블릿과 클래스 로드하는 컴포넌트
9. 매니저 - 사용자의 세션을 관리하는 컴포넌트
10. 웹 애플리케이션의 보안 - 접근 제어, 보안 주체, 보안 역할, 로그인 설정, 인증자 등
11. `org.apache.catalina.core.StandardWrapper` 클래스 자세히 살펴보기. 필터와 서블릿의 service 메소드 호출되는 원리 알아보기
12. `org.apache.catalina.core.StandardContext` 클래스 살펴보기. StandardContext 객체를 설정하는 방법, 각 HTTP 요청이 들어왔을 때 일어나는 일, 자동 재로딩의 원리, 관련 컴포넌트에서 정기적인 작업을 수행하는 스레드를 어떻게 톰캣 5가 공유하고 사용하는지 알아보기
13. host, engine 컨테이너 소개
14. 서버 컴포넌트(서블릿 컨테이너 전체의 세련된 시작/중지 방법 제공)와 서비스 컴포넌트(하나의 컨테이너와 하나 이상의 커넥터를 보유하는 컴포넌트). 서버와 서비스 사용법
15. 다이제스터(Digester) 라이브러리를 통해 웹 애플리케이션의 설정이 어떻게 이뤄지는지. (XML 문서를 자바 객체로 변환해 주는 기능을 하는데, 어떻게 변환할 수 있는지 알아본다.)
16. 사용자가 톰캣을 종료할 때 필요한 뒤처리(clean-up)을 항상 할 수 있게 하는 종료 후크(shutdown hook)
17. 배치 파일(batch file)이나 쉘 스크립트(shell script)를 써서 톰캣을 시작/중지 하는 방법
18. 배치자(deployer) - 웹 애플리케이션을 배치, 설치하는 역할을 맡음
19. ContainerServlet - 서블릿이 카탈리나의 내부 객체에 접근할 수 있게 해주는 인터페이스 / 배치된 애플리케이션을 관리할 수 있는 관리자 애플리케이션(manager application)에 관하여
20. JMX에 관해서, 톰캣이 MBean을 만들어서 자신의 내부 객체를 쉽게 관리하는 방법에 대하여 알아보기


### 참고 문헌
- 톰캣 최종분석
- [아파치 톰캣 버전](http://adminid.kr/apache/50534)
- [[IT/트랜드] Apache Tomcat 활용하기 ① (Tomcat 설치하기)](https://daitso.kbhub.co.kr/60434/)
